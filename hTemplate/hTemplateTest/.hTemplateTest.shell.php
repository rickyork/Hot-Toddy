<?php
  class hTemplateTestShell extends hShell { private $templateVariables; private $template; private $matchCurlyBraces = "/\{([^{}]+|(?R))*\}/";  public function hConstructor() {                                                                                      if ($this->shellArgumentExists('test', '--test')) { switch ($this->getShellArgumentValue('test', '--test')) { case 'iteration': { $this->iteration(); break; } } } } public function iteration() { $template = file_get_contents(dirname(__FILE__).'/TXT/Iteration.txt'); $this->console($template); echo $this->parseTemplate( $template, array( 'navigation' => array( (object) array( 'link' => "/Practices/footandankle/index.html", 'label' => "Home", 'id' => "Home" ), (object) array( 'link' => "/Practices/footandankle/Providers.html", 'label' => "Meet Our Team", 'id' => "Providers" ), (object) array( 'link' => "/Practices/footandankle/Services.html", 'label' => "Services", 'id' => "Services" ), (object) array( 'link' => "/Practices/footandankle/Common Disorders.html", 'label' => "Common Disorders", 'id' => "CommonDisorders" ), (object) array( 'link' => "/Practices/footandankle/Fellowship.html", 'label' => "Fellowship", 'id' => "Fellowship" ), (object) array( 'link' => "/Practices/footandankle/About Us.html", 'label' => "About Us", 'id' => "AboutUs" ) ) ) ); } public function expandTemplate($matches) { if (preg_match('/^(\$|\w|\d)*$/', $matches[1])) { $variableMatch = $matches[1]; if (substr($variableMatch, 0, 1) == '$') { $variableMatch = substr($variableMatch, 1); } if (isset($this->templateVariables[$variableMatch])) { return $this->templateVariables[$variableMatch]; } } $subMatches = array(); return '{'.preg_replace_callback($this->matchCurlyBraces, array($this, 'expandTemplate'), $matches[1]).'}'; } } ?>