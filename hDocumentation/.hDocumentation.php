<?php
  class hDocumentation extends hPlugin { private $hDocumentation; private $hFileCache; private $hDashboard; public function hConstructor() {          $this->hDashboard = $this->library('hDashboard'); $html = ''; $documentationFileId = 0;                                 if (!empty($_SERVER['QUERY_STRING'])) { if (is_numeric($_SERVER['QUERY_STRING'])) { $documentationFileId = (int) $_SERVER['QUERY_STRING']; } else { $path = hString::safelyDecodeURL($_SERVER['QUERY_STRING']); $plugin = $this->queryPlugin($path); if ($plugin['isPrivate']) { $path = '/Plugins'.$plugin['path']; } else { $path = '/Hot Toddy'.$plugin['path']; } $documentationFileId = $this->hDocumentationFiles->selectColumn( 'hDocumentationFileId', array( 'hDocumentationFile' => $path ) ); } } $this->getPluginCSS('/Library/SyntaxHighlighter/Styles/shCore', true); $this->getPluginCSS('/Library/SyntaxHighlighter/Styles/shThemeDefault', true); $this->getPluginJavaScript('/Library/SyntaxHighlighter/Scripts/shCore', true); $brushes = array( 'Bash', 'Css', 'JScript', 'Php', 'Sql', 'Xml', 'Plain' ); foreach ($brushes as $brush) { $this->getPluginJavascript('/Library/SyntaxHighlighter/Scripts/shBrush'.$brush, true); } $this->hDocumentation = $this->library('hDocumentation'); if (!empty($documentationFileId)) { $html = $this->hDocumentation->getFileTemplate($documentationFileId); } $this->getPluginFiles(); $this->getPluginCSS('/hDocumentation/CSS/Syntax Coloring', true); $this->hFileTitle = 'Hot Toddy Documentation'; $this->HotToddySideBoxHeading = 'Topics'; $this->HotToddySideBoxContent = $this->getTemplate('Navigation'); $pluginNavigation = ''; if (empty($documentationFileId)) { $this->hFileCache = $this->library('hFile/hFileCache'); $pluginNavigation = $this->hDocumentation->getNavigation(); } $this->hFileDocument = $this->getTemplate( 'Search', array( 'html' => $html, 'pluginNavigation' => $pluginNavigation ) ); } } ?>